<% display='true' %>
<div id="ajax-hardwares">
		<div class="container-fluid">
			<div class="row-fluid">
				<div class="span12">
						<div class="form-actions">
									<%= link_to "Add New",'#', :class =>'btn btn-success btn-xs add-hardwares',:trackingsheet_id=>params[:trackingsheet_id] %>
						</div>
				</div>
			</div>
		</div>
		<div class="container-fluid">
			<div class="row-fluid">
				<div class="span12">
					<div class="widget-box">
						<div class="widget-title">
							<span class="icon">
								<i class="icon-file"></i>
							</span>
							<h5>Listing Hardwares</h5>
							</div>	
					
							<table class="table table-bordered hardware-table">
								<thead>
									<tr>
										<th>Description</th>
										<th>Countryoforgin</th>
										<th>Mill</th>
										<th>Supplier</th>
										<th>Supplierpart</th>
										<th>Leadtime</th>
										<th>Unitqty</th>
										<th>Unitprice</th>
										<th>Totalprice</th>
      						</tr>
									</thead>
									<tbody>
									<% @a=1%>
									<% @hardwares.each do |hardware|%>
										<tr>
											<td class="bestin" style="text-align:center;">
												<%=best_in_place_if display,  hardware, :description, :as => :input,:nil => "Click to add content!" %>
											</td>
											<td class="bestin" style="text-align:center;">
												<%=best_in_place_if display,  hardware, :countryoforgin, :as => :input,:nil => "Click to add content!" %>
											</td>
											<td class="bestin" style="text-align:center;">
												<%=best_in_place_if display,  hardware, :mill, :as => :input,:nil => "Click to add content!" %>
											</td>
											<td class="bestin" style="text-align:center;">
												<%=best_in_place_if display,  hardware, :supplier, :as => :input,:nil => "Click to add content!" %>
											</td>
											<td class="bestin" style="text-align:center;">
												<%=best_in_place_if display,  hardware, :supplierpart, :as => :input,:nil => "Click to add content!" %>
											</td>
											<td class="bestin" style="text-align:center;">
												<%=best_in_place_if display,  hardware, :leadtime, :as => :input,:nil => "Click to add content!" %>
											</td>
											<td class="bestin" style="text-align:center;">
												<%=best_in_place_if display,  hardware, :unitqty, :as => :input,:nil => "Click to add content!" %>
											</td>
											<td class="bestin" style="text-align:center;">
												<%=best_in_place_if display,  hardware, :unitprice, :as => :input,:nil => "Click to add content!" %>
											</td>
											<td class="bestin" style="text-align:center;">
												<%=best_in_place_if display,  hardware, :totalprice, :as => :input,:nil => "Click to add content!" %>
											</td>
											
										</tr>
									</tbody>
									<% @a=@a+1%>
									<% end %>
								</table>
							
				</div>
			</div>
		</div>
	</div>
	<script type="text/javascripts">
		
		$('.add-hardwares').on('click',function(){

		var trackingsheetid=$(this).attr('trackingsheet_id');
		createandgethardwares(trackingsheetid);

		});

		function createandgethardwares(trackingsheetid){
		var trackingsheetid=trackingsheetid;
		$.get("/ajaxcreate_hardwares", {
				trackingsheet:trackingsheetid
			},function(data){
				$('.modal').css('width','1200');
				$('.modal').css('left','30%');
				$('.modal-body').html(data);

			});


		}

		
$('.hardware-table td span').on('keydown',function(e){ 

	var keyCode = e.keyCode || e.which; 

	if (e.shiftKey && keyCode == 9){

			findPrevTabindexhardware($(this).parent().prev());
			e.preventDefault(); 
	
	}else if (keyCode == 9) { 
		 findNextTabindexhardware($(this).parent().next());
			e.preventDefault(); 
   
  }
});
	


function findNextTabindexhardware(next){

if(next.children().is("span")){
$('#'+next.find('span').attr('id')).trigger('click');

}else{
nextspan=next.next();
findNextTabindexhardware(nextspan);

}
}

function findPrevTabindexhardware(prev){

if(prev.children().is("span")){
$('#'+prev.find('span').attr('id')).trigger('click');

}else{
prevspan=prev.prev();
findPrevTabindexhardware(prevspan);

}
}

$("#close-modal").click(function(){
$('.modal-body').html('');
location.reload();
});


	</script>

	<%= javascript_include_tag "application" %>
</div>
